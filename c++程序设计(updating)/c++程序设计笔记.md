# 课程结构

<img src="D:\Typora_CACHE\image-20220903101707898.png" alt="image-20220903101707898" style="zoom: 18%;" />

<img src="D:\Typora_CACHE\image-20220903101758734.png" alt="image-20220903101758734" style="zoom: 18%;" />

<img src="D:\Typora_CACHE\image-20221015114916605.png" alt="image-20221015114916605" style="zoom: 33%;" />

<img src="D:\Typora_CACHE\image-20221015115401575.png" alt="image-20221015115401575" style="zoom:23%;" />

# 1. C++基本概念

**高内聚低耦合**

## 对象：

使用类生成的实例

## 类：

用户定义的一个数据类型

## 抽象：

对象只暴露必要的外部信息，将复杂的内部细节和背景信息隐藏在对象内部

## 封装：

将相关联的数据和函数绑定在同一实体中，保证数据安全

## 继承：

对类的功能进行拓展，有效实现代码复用，使代码结构更清晰移动
是重要多态性的实现方式之一

## 多态：

在类等级的不同层次中可以共享一个行为的名字，不同层级每个类按自己的需求来实现

## 如何评价

<img src="D:\Typora_CACHE\image-20220903113519118.png" alt="image-20220903113519118" style="zoom:67%;" />

<img src="D:\Typora_CACHE\image-20220903115839135.png" alt="image-20220903115839135" style="zoom:80%;" />

# 2. 初识C++程序

## 2.1 环境配置

编译器：g++(gcc)、 clang++（clang）、msvc

## 2.2 C++基本代码结构

C++注释：

1. 不嵌套使用注释
2. 对接口函数、难理解代码进行注释
3. 临时或需优化逻辑使用TODO(yourself)注释标记
4. 不使用的代码直接删除，不要注释

预处理器编译指令#include：
引入系统库或自定义头文件，在预处理阶段会被覆盖替换

包含C++标准库时不写.h扩展名
#include <iostream.h> // 错误
包含自定义头文件时要写扩展名
#include “myheader.h”
包含C语言标准头文件时有两种写法
#include <cmath>
#include <math.h>

**C++的基本单元：语句**
每一条语句必须以分号作为结束标识，不可省略

**函数结构：**
函数名、函数头、函数定义、函数体、结束函数

## 2.3 main函数

C++函数和C中函数主要区别体现在两点：默认参数和函数重载

1、一个函数可以包含多个默认参数
2、如果一个参数包含默认值，那么该参数之后的所有参数都必须包含默认值
3、在同一个作用域内，可以声明几个功能类似的同名函数，但是这些同名函数的形式参数（指参数的个数、类型或者顺序）必须不同。编译器能够根据调用过程的不同参数类型决定具体的调用函数

**慎用函数默认参数与函数重载**

1. main函数可接受外部参数，本节以无参数main为例
   无参版本：int main(void);    有参版本：int main(int argc, char* argv[]);
2. main函数须返回int值，不应返回空
   void main() // 错误
3. main函数末尾无返回语句隐含return 0;
4. 特殊场景下主函数名不为main，实际存在隐含main

## 2.4 标准输入输出

- cout支持多个流插入符连续插入
- cout默认支持int/float/doule等内置类型重载，也支持string

**std::endl**有两个功能：

1. 相当于换行符’\n’
2. flush输出缓存，保证打印输出数据

<img src="D:\Typora_CACHE\image-20220924103148969.png" alt="image-20220924103148969" style="zoom:50%;" />

<img src="D:\Typora_CACHE\image-20220924103209276.png" alt="image-20220924103209276" style="zoom:50%;" />

C++中简单类型如int/float/double等在定义时一定要手动初始化

尽量不要用using namespace的方式，团队开发时容易造成明明冲突，也不利于代码阅读。

如果必须使用using namespace时（多个命名空间嵌套较深），**不要将using namespace语句放入头文件中**

# 3. C++数值、变量、关键字

C++是一种静态语言

C++变量初始语法：

- C语言初始化语法
- 小括号参数初始化语法
- 列表初始化语法

**若没有定初值，变量被默认初始化：**

- 全局变量为0
- 局部变量不被初始化（函数存在在stack中，全局变量在data中）

extern关键字，从别的模块获得局部变量

## 3.4 指针

&取地址、*解地址

动态内存分配 new delete 

不用NULL，指针使用nullptr

**引用&**

不是一个对象，引用不能定义引用的引用

## 3.5 数组

定义同时初始化 e.g.int data1[4] = {1,2,3,4};
定义 int data2[4];

## 3.6 vector

## 3.7 结构体

字节补充
#pragma pack（n）制定对齐位数

## 3.8 共用体

union 常用于节省内存

## 3.9 枚举

enum 定义符号常量的方式，从0开始自增

## 3.10 const关键字

描述不可修改的变量，声明时初始化

## 3.11 类型转换

# 4. 函数

## 4.1 内联函数

定义在header中

## 4.2 引用参数

& 避免传参数据拷贝，修改后实参也会改变

左值 lvalue 能够取内存地址，不能移动的值

右值 rvalue 表达式的中间结果，函数返回值

**const引用参数可以接受右值**，给函数传递右值参数后，编译器自动生成了一个临时左值变量作为函数参数额

左值引用&

右值引用&&

常值引用 const type&

**右值引用能够避免参数拷贝，提高执行效率**
std::move()将左值转换为右值

## 4.3 函数默认参数

必须全部设为默认参数

只允许在声明中出现

必须从左往右写，不允许跳过

## 4.4 函数重载

静态多态性的体现

慎用，可以尝试自定义数据结构作为函数参数，避免定义多种重载函数

## 4.5 函数的内存模型

栈帧是指为一个函数调用单独分配的那部分栈空间

ebp帧指针指向底部
esp栈指针指向顶部

# 5. 类

## 面向对象

**成员变量**一般在后加下划线 _ 或前加字符_
**成员函数**会用c的方式(以下划线分割)

C++中class和struct大括号要加分号
因为需要大量定义后就声明

无特殊理由，class的成员变量不设计为public访问

函数作为接口来读写可以继续在函数中实现一些功能（如给多线程加锁）

**成员函数可以直接访问成员变量**

**const**成员变量在初始化后不允许修改
**const**成员函数不允许修改一般成员变量
mutable修饰的变量在const成员函数中仍可被修改

class默认访问权限和继承时默认访问权限是private，struct为public	

## 特殊成员函数

### 构造函数

- 与类名相同
- 无返回值
- 初始化
- 支持重载

**私有构造函数-工厂模式**

存在默认构造函数可以直接初始化，也可以使用{}列表初始化

方法1： 参数初始化列表

```c++
People::People(int age, int height)
    :age_(age), height_(height){
        
    }
```

**必须使用初始值列表的应用场景：**

- const成员变量初始化
- 引用成员变量初始化
- 对象成员变量初始化

**初始值列表的初始化顺序：**

- 初始化列表仅说明用于初始化成员的值，不限定具体的执行顺序
- 

**explicit关键字显式抑制**

### 析构函数

- ~类名
- 对象销毁时自动调用
- 不接受任何参数
- 没有重载

销毁

### 静态成员

- 需要定义
- 无需static关键字
- 静态成员函数无法访问非静态成员
- 静态成员变量允许出现不完整类型（**只有声明没有定义的类型**）

### this指针

**普通成员函数**可以通过this关键字获取当前对象的指针

### 拷贝构造函数

### 拷贝赋值函数

# 6. 运算符重载与友元

## 6.1 运算符重载

通过运算符重载实现自定义类型的计算

```c++
returnType operatorOP(arg list); //OP为重载的运算符

//运算符重载示例
operator+(...)
operator*(...)
```

运算符重载也可以显式调用

